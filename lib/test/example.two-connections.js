// Generated by CoffeeScript 1.7.1
(function() {
  var Fixture, ShadowPlace, expect, mongoose;

  Fixture = require("../");

  expect = require("expect.js");

  mongoose = require("mongoose");

  ShadowPlace = mongoose.connections[1].models.Place;

  describe("ShadowPlace model", function() {
    before(function(done) {
      Fixture.use([]);
      return Fixture.initModels(done);
    });
    beforeEach(function(done) {
      return Fixture.populate(done);
    });
    it("should be empty", function(done) {
      return ShadowPlace.find({}, function(err, places) {
        if (err) {
          throw err;
        }
        expect(places).to.be.empty();
        return done();
      });
    });
    it("should be able to insert things", function(done) {
      var place;
      place = new ShadowPlace({
        name: "Shadow Detroit"
      });
      return place.save(function(err) {
        if (err) {
          throw err;
        }
        return ShadowPlace.findOne({
          name: "Shadow Detroit"
        }, function(err, detroit) {
          if (err) {
            throw err;
          }
          expect(detroit.name).to.be("Shadow Detroit");
          return done();
        });
      });
    });
    return it("shouldn't be there anymore", function(done) {
      return ShadowPlace.find({}, function(err, places) {
        if (err) {
          throw err;
        }
        expect(places).to.be.empty();
        return done();
      });
    });
  });

}).call(this);
